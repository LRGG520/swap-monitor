import{a as m,f,g as w,h as b,j as _}from"./chunk-4VCBTKFR.mjs";import{a as S}from"./chunk-DSILH5UU.mjs";import{a as C}from"./chunk-AOD56HJK.mjs";import{a as P}from"./chunk-KRKHMMVN.mjs";import{a as I}from"./chunk-B4TGWP6T.mjs";import{d as A}from"./chunk-PSOJ2Q5V.mjs";import{a as T}from"./chunk-FFPUBX3I.mjs";import{c as y,m as r}from"./chunk-7YVNZXS3.mjs";import{b as d}from"./chunk-DGFOO2VY.mjs";import{b as p}from"./chunk-R7AH4Q5E.mjs";import{a as s}from"./chunk-LID3RY72.mjs";import{b as l}from"./chunk-RIZM4VPI.mjs";async function R(t){let e=await U(t);return G(t,e)}async function U(t){let{endlessConfig:e,data:n}=t,a,o;return"bytecode"in n?o=await m(n):"multisigAddress"in n?(a={endlessConfig:e,multisigAddress:n.multisigAddress,function:n.function,functionArguments:n.functionArguments,typeArguments:n.typeArguments,abi:n.abi},o=await m(a)):(a={endlessConfig:e,function:n.function,functionArguments:n.functionArguments,typeArguments:n.typeArguments,abi:n.abi},o=await m(a)),o}async function G(t,e){let{endlessConfig:n,sender:a,options:o}=t,i;if(D(t)&&(i=p.ZERO.toString()),E(t)){let{secondarySignerAddresses:c}=t;return f({endlessConfig:n,sender:a,payload:e,options:o,secondarySignerAddresses:c,feePayerAddress:i})}return f({endlessConfig:n,sender:a,payload:e,options:o,feePayerAddress:i})}function D(t){return t.withFeePayer===!0}function E(t){return"secondarySignerAddresses"in t}function $(t){let{transaction:e}=t;return A(e)}function K(t){let{signer:e,transaction:n}=t;return e.signTransactionWithAuthenticator(n)}async function nn(t){let{endlessConfig:e,transaction:n,signerPublicKey:a,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:c}=t,u=w({transaction:n,signerPublicKey:a,secondarySignersPublicKeys:o,feePayerPublicKey:i,options:c}),{data:g}=await d({endlessConfig:e,body:u,path:"transactions/simulate",params:{estimate_gas_unit_price:t.options?.estimateGasUnitPrice??!1,estimate_max_gas_amount:t.options?.estimateMaxGasAmount??!1,estimate_prioritized_gas_unit_price:t.options?.estimatePrioritizedGasUnitPrice??!1},originMethod:"simulateTransaction",contentType:"application/x.endless.signed_transaction+bcs"});return g}async function tn(t){let{endlessConfig:e,transaction:n}=t,a=b(n),{data:o}=await d({endlessConfig:e,body:a,path:"transactions/simulate",params:{estimate_gas_unit_price:t.options?.estimateGasUnitPrice??!1,estimate_max_gas_amount:t.options?.estimateMaxGasAmount??!1,estimate_prioritized_gas_unit_price:t.options?.estimatePrioritizedGasUnitPrice??!1},originMethod:"simulateTransaction",contentType:"application/x.endless.signed_transaction+bcs"});return o}async function M(t){let{endlessConfig:e}=t,n=_({...t}),{data:a}=await d({endlessConfig:e,body:n,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.endless.signed_transaction+bcs"});return a}async function B(t){let{endlessConfig:e,signer:n,transaction:a}=t;(n instanceof I||n instanceof C)&&await n.waitForProofFetch();let o=K({signer:n,transaction:a});return M({endlessConfig:e,transaction:a,senderAuthenticator:o})}var N={typeParameters:[],parameters:[r.u8(),new r(r.u8())]};async function en(t){let{endlessConfig:e,account:n,metadataBytes:a,moduleBytecode:o,options:i}=t,c=o.map(u=>s.U8(u));return R({endlessConfig:e,sender:p.from(n),data:{function:"0x1::code::publish_package_txn",functionArguments:[s.U8(a),new s(c)],abi:N},options:i})}var F={typeParameters:[],parameters:[new y,r.u8(),new y,r.u8(),r.u8(),r.u8()]};async function an(t){let{endlessConfig:e,fromAccount:n,toNewPrivateKey:a}=t,o=await S({endlessConfig:e,accountAddress:n.accountAddress}),i=P.fromPrivateKey({privateKey:a,legacy:!0}),u=new T({sequenceNumber:BigInt(o.sequence_number),originator:n.accountAddress,currentAuthKey:p.from(o.authentication_key),newPublicKey:i.publicKey}).bcsToBytes(),g=n.sign(u),h=i.sign(u),x=await R({endlessConfig:e,sender:n.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new l(n.signingScheme),s.U8(n.publicKey.toUint8Array()),new l(i.signingScheme),s.U8(i.publicKey.toUint8Array()),s.U8(g.toUint8Array()),s.U8(h.toUint8Array())],abi:F}});return B({endlessConfig:e,signer:n,transaction:x})}export{R as a,U as b,G as c,$ as d,K as e,nn as f,tn as g,M as h,B as i,en as j,an as k};
//# sourceMappingURL=chunk-E32QME53.mjs.map